@model SIMS.Models.DashboardViewModel
@{
    ViewData["Title"] = "Dashboard";
    var roleLabel = User.IsInRole("Admin") ? "Admin"
        : User.IsInRole("Faculty") ? "Faculty"
        : User.IsInRole("Student") ? "Student"
        : "Guest";
}

<div class="py-4 dashboard">
    <section class="dashboard-hero mb-4">
        <div class="row align-items-center">
            <div class="col-lg-12">
                <p class="text-uppercase fw-semibold small text-accent mb-2">Welcome back</p>
                <h1 class="display-6 fw-bold mb-2">Student Information Management System</h1>
                <div class="d-flex align-items-center gap-2 mb-3">
                    <span class="badge bg-soft text-uppercase">Role: @roleLabel</span>
                </div>
                <div class="d-flex flex-wrap gap-2">
                    @if (User.IsInRole("Admin"))
                    {
                        <a class="btn btn-primary" asp-controller="Students" asp-action="Index"><i class="bi bi-people-fill me-1"></i> Manage students</a>
                        <a class="btn btn-outline-primary" asp-controller="Courses" asp-action="Index"><i class="bi bi-journal-bookmark-fill me-1"></i> Manage courses</a>
                        <a class="btn btn-outline-primary" asp-controller="Enrollments" asp-action="Index"><i class="bi bi-card-checklist me-1"></i> Manage enrollments</a>
                    }
                    else if (User.IsInRole("Faculty"))
                    {
                        <a class="btn btn-primary" asp-controller="Courses" asp-action="Index"><i class="bi bi-journal-text me-1"></i> My courses</a>
                        <a class="btn btn-outline-primary" asp-controller="Enrollments" asp-action="Index"><i class="bi bi-people me-1"></i> Classes & rosters</a>
                        <a class="btn btn-outline-secondary" asp-controller="Reports" asp-action="Index"><i class="bi bi-graph-up me-1"></i> Reports</a>
                    }
                    else if (User.IsInRole("Student"))
                    {
                        <a class="btn btn-primary" asp-controller="Students" asp-action="MyProfile"><i class="bi bi-person-circle me-1"></i> My profile</a>
                        <a class="btn btn-outline-primary" asp-controller="Students" asp-action="MyGrades"><i class="bi bi-stars me-1"></i> Grades</a>
                        <a class="btn btn-outline-secondary" asp-controller="Students" asp-action="MyTimetable"><i class="bi bi-calendar-week me-1"></i> Timetable</a>
                    }
                </div>
            </div>
        </div>
    </section>

    <div class="row g-3 mb-4">
        <div class="col-md-4">
            <div class="card metric-card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <span class="text-uppercase small text-secondary">Students</span>
                        <i class="bi bi-people-fill text-primary fs-4"></i>
                    </div>
                <div class="display-6 fw-bold">@Model.Students</div>
                    <p class="text-muted small mb-0">Records under management</p>
                </div>
            </div>
        </div>
        @if (User.IsInRole("Admin"))
        {
            <div class="col-md-4">
                <div class="card metric-card h-100">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-between mb-2">
                            <span class="text-uppercase small text-secondary">Faculty</span>
                            <i class="bi bi-mortarboard-fill text-success fs-4"></i>
                        </div>
                        <div class="display-6 fw-bold">@Model.Faculty</div>
                        <p class="text-muted small mb-0">Faculty accounts</p>
                    </div>
                </div>
            </div>
        }
        <div class="col-md-4">
            <div class="card metric-card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <span class="text-uppercase small text-secondary">Courses</span>
                        <i class="bi bi-journal-bookmark-fill text-success fs-4"></i>
                    </div>
                <div class="display-6 fw-bold">@Model.Courses</div>
                    <p class="text-muted small mb-0">Open course offerings</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card metric-card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <span class="text-uppercase small text-secondary">Enrollments</span>
                        <i class="bi bi-card-checklist text-info fs-4"></i>
                    </div>
                <div class="display-6 fw-bold">@Model.Enrollments</div>
                    <p class="text-muted small mb-0">Enrollments recorded</p>
                </div>
            </div>
        </div>
    </div>

    <div class="row g-3">
        <div class="col-12">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h5 class="mb-0">Support</h5>
                        <i class="bi bi-life-preserver text-accent fs-5"></i>
                    </div>
                    <p class="text-muted small">Need help? Reach out to an admin or review the guide.</p>
                    <div class="d-grid gap-2">
                        <a class="btn btn-outline-primary" asp-controller="Home" asp-action="Privacy"><i class="bi bi-lock me-1"></i> Policies & guide</a>
                        <a class="btn btn-outline-secondary" href="mailto:admin@sims.local"><i class="bi bi-envelope me-1"></i> Contact admin</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

